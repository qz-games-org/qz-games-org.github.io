var sidenavstatus=!1,translatemenustatus=!1,filtermenustatus=!1,sidenavcont=document.getElementById("sidenavcont"),backdropside=document.getElementById("backdropside"),sidenav=document.getElementById("sidenav"),filtermenu=document.getElementById("filterM"),translatemenu=document.getElementById("translateM");function ToggleSideNav(){if(sidenavstatus)sidenavstatus=!1,backdropside.style.opacity="0",sidenav.addEventListener("animationend",function e(t){"sidenavout"===t.animationName&&(sidenavcont.style.visibility="hidden",backdropside.style.visibility="hidden",sidenav.removeEventListener("animationend",e))}),sidenav.style.animation="sidenavout 0.5s forwards";else{sidenavcont.style.visibility="visible",backdropside.style.visibility="visible",backdropside.style.opacity="1",sidenav.style.animation="sidenavin 0.5s forwards",sidenavstatus=!0}}function ToggleTranslate(){translatemenustatus===!1?(loadGoogleTranslate(),translatemenustatus=!0,translatemenu.style.visibility="visible",translatemenu.style.opacity=1,translatemenu.style.animation="translatemenuin 0.5s"):translatemenustatus===!0&&(translatemenustatus=!1,translatemenu.style.opacity=0,translatemenu.style.animation="translatemenuout 0.5s",setTimeout(()=>{translatemenu.style.visibility="hidden"},450))}function loadGoogleTranslate(){if(!document.getElementById("translatescript")){var e=document.createElement("script");e.setAttribute("src","https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"),e.type="text/javascript",e.id="translatescript",document.body.appendChild(e)}}window.autoTranslate&&window.autoTranslate.isAutoTranslateEnabled()&&loadGoogleTranslate();function ToggleFilter(){filtermenustatus===!1?(filtermenustatus=!0,filtermenu.style.visibility="visible",filtermenu.style.opacity=1,filtermenu.style.animation="filterwin 0.5s"):filtermenustatus===!0&&(filtermenu.style.opacity=0,filtermenu.style.animation="filterwout 0.5s",filtermenustatus=!1,setTimeout(()=>{filtermenu.style.visibility="hidden"},450))}const notecont=document.getElementById("notafication"),notetitle=document.getElementById("titlenote"),notedesc=document.getElementById("descnote"),cookiepicnote=document.getElementById("cookiepic"),noteclose=document.getElementById("closenote"),notebottom=document.getElementById("notification-bottom"),noteQueue=[];let noteBusy=!1,cookienote=!1;function issuenote(e,t,n,o,i){noteQueue.push({title:e,desc:t,close:n,type:o,showLearnMore:i}),noteBusy||showNextNote()}function closeNote(){cookienote===!0&&(setCookie("confirmedcookie","true"),cookienote=!1),notecont.style.animation="notehide 0.5s";const e=()=>{notecont.style.display="none",notecont.removeEventListener("animationend",e),showNextNote()};notecont.addEventListener("animationend",e)}function showNextNote(){if(0===noteQueue.length)return noteBusy=!1,void 0;noteBusy=!0;const{title:e,desc:t,close:n,type:o,showLearnMore:i}=noteQueue.shift();"cookie"===o?(cookienote=!0,notetitle.textContent="We Use Cookies",notedesc.textContent="By using our site you agree to cookies for analytics and personalization.",cookiepicnote.style.display="block",noteclose.style.display="block",notebottom.style.display="block"):(notetitle.textContent=e,notedesc.textContent=t,cookiepicnote.style.display="none",noteclose.style.display=n===!1?"none":"block",notebottom.style.display=i?"block":"none"),noteclose.onclick=closeNote,notecont.style.display="block",notecont.style.animation="noteshow 0.5s"}function checkConfirmedCookie(){const e=getCookie("confirmedcookie");(!e||"false"===e)&&issuenote("cookie","cookie",!0,"cookie")}document.addEventListener("DOMContentLoaded",checkConfirmedCookie);function removeAds(){document.querySelectorAll(".ad-item").forEach(e=>e.remove())}class GameSearchEngine{constructor(e="#games"){this.container=document.querySelector(e),this.games=[],this.originalDisplay=new Map,this.init()}init(){this.container?this.indexGames():console.error("Games container not found")}indexGames(){const e=this.container.querySelectorAll(".gameitem");this.games=Array.from(e).map(e=>(this.originalDisplay.set(e,e.style.display||""),{element:e,id:e.id||"",name:this.extractGameName(e),tags:this.extractTags(e),link:e.querySelector("a")?.href||""}))}extractGameName(e){const t=e.querySelector(".gametextover");if(t)return t.textContent.trim();const n=e.querySelector("img");return n?n.alt.replace(" Cover","").trim():e.id||""}extractTags(e){const t=e.getAttribute("tags");return t?t.includes(",")?t.split(",").map(e=>e.trim().toLowerCase()):t.split(" ").map(e=>e.trim().toLowerCase()):[]}calculateSimilarity(e,t){if(e=e.toLowerCase(),t=t.toLowerCase(),e===t)return 1;if(e.includes(t)||t.includes(e))return .8;const n=[],o=e.length,i=t.length;if(0===o)return 0===i?1:0;if(0===i)return 0;for(let e=0;e<=o;e++)n[e]=[e];for(let e=0;e<=i;e++)n[0][e]=e;for(let a=1;a<=o;a++)for(let o=1;o<=i;o++){const i=e[a-1]===t[o-1]?0:1;n[a][o]=Math.min(n[a-1][o]+1,n[a][o-1]+1,n[a-1][o-1]+i)}const a=Math.max(o,i);return 1-n[o][i]/a}searchByName(e,t=.6){if(!e||""===e.trim())return this.showAllGames();e=e.trim();const n=[];return this.games.forEach(o=>{const i=this.calculateSimilarity(e,o.name),a=o.name.toLowerCase().includes(e.toLowerCase());(i>=t||a)&&n.push({...o,score:a?Math.max(i,.9):i})}),n.sort((e,t)=>t.score-e.score),this.displayResults(n.map(e=>e.element)),n}searchByTags(e,t=!1){if(!e||0===e.length)return this.showAllGames();const n=Array.isArray(e)?e.map(e=>e.toLowerCase().trim()):[e.toLowerCase().trim()],o=this.games.filter(e=>t?n.every(t=>e.tags.includes(t)):n.some(t=>e.tags.includes(t)));return this.displayResults(o.map(e=>e.element)),o}showAllGames(){return this.games.forEach(e=>{e.element.style.display=this.originalDisplay.get(e.element)||"",e.element.style.order=""}),this.games}displayResults(e){this.games.forEach(e=>{e.element.style.display="none"}),e.forEach((e,t)=>{e.style.display=this.originalDisplay.get(e)||"",e.style.order=t})}getAllTags(){const e=new Set;return this.games.forEach(t=>{t.tags.forEach(t=>e.add(t))}),Array.from(e).sort()}clearSearch(){return this.showAllGames()}}function createGameSearchEngine(){const e=new GameSearchEngine("#games");return window.searchGames=function(t){removeAds();const n=e.searchByName(t);return gameSearchEngine.games.forEach(e=>{e.element.classList.contains("ad-item")||(e.element.style.display="none")}),n.forEach(e=>{e.element.style.display=""}),n},window.filterByTag=function(t,n=!1){return e.searchByTags(t,n)},window.clearGameSearch=function(){return gamesData&&renderGames(gamesData,!1),e.clearSearch()},window.getGameTags=function(){return e.getAllTags()},window.reindexGames=function(){return e.indexGames()},e}let gameSearchEngine=null;window.initializeGameSearch=function(){return gameSearchEngine=createGameSearchEngine(),console.log("Game search engine initialized with",gameSearchEngine.games.length,"games"),gameSearchEngine};class SearchBarHandler{constructor(e,t={}){this.searchInput=document.querySelector(e),this.debounceTimer=null,this.options={delay:300,minLength:1,clearOnEmpty:!0,showSuggestions:!1,...t},this.init()}init(){this.searchInput?this.attachEventListeners():console.error("Search input element not found")}attachEventListeners(){this.searchInput.addEventListener("input",e=>{this.handleSearchInput(e.target.value)}),this.searchInput.addEventListener("keydown",e=>{"Escape"===e.key&&(this.clearSearch(),this.searchInput.blur())})}handleSearchInput(e){if(this.debounceTimer&&clearTimeout(this.debounceTimer),""===e.trim()){if(this.options.clearOnEmpty)this.performSearch("");return}e.trim().length<this.options.minLength||(this.debounceTimer=setTimeout(()=>{this.performSearch(e.trim())},this.options.delay))}performSearch(e){if("function"!=typeof searchGames){console.warn("Search engine not initialized yet");return}if(""===e)clearGameSearch();else{const t=searchGames(e);console.log(`Search for "${e}" returned ${t.length} results`)}}clearSearch(){this.searchInput.value="","function"==typeof clearGameSearch&&clearGameSearch()}setDelay(e){this.options.delay=e}destroy(){this.debounceTimer&&clearTimeout(this.debounceTimer)}}function initializeSearchBar(e="#searchInput",t={}){return new SearchBarHandler(e,t)}initializeSearchBar("#gamesearch",{delay:300,minLength:1,showSuggestions:!0,clearOnEmpty:!0});



